(()=>{console.log("MandarinWays loaded"),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){const t=document.querySelector(this.getAttribute("href"));t&&(e.preventDefault(),t.scrollIntoView({behavior:"smooth"}))}))}));const e=document.querySelector("header");window.addEventListener("scroll",(()=>{window.scrollY>50?e.classList.add("shrink"):e.classList.remove("shrink")}));const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))}))}),{threshold:.1});document.querySelectorAll(".fade-section").forEach((e=>t.observe(e)));const n=document.getElementById("theme-toggle");n&&("dark"===localStorage.getItem("theme")&&(document.body.classList.add("dark"),n.textContent="‚òÄÔ∏è"),n.addEventListener("click",(()=>{document.body.classList.toggle("dark");const e=document.body.classList.contains("dark");n.textContent=e?"‚òÄÔ∏è":"üåô",localStorage.setItem("theme",e?"dark":"light")})));const o=document.getElementById("routes-container");let r=[];if(o){fetch("data/routes.json").then((e=>e.json())).then((e=>{r=e,l(e);const t=e[0];if(t){const e=document.getElementById("featured-image"),n=document.getElementById("featured-title"),o=document.getElementById("featured-desc"),r=document.getElementById("featured-price");e&&(e.src=t.image),n&&(n.textContent=t.title),o&&(o.textContent=t.description),r&&(r.textContent=`–æ—Ç ${t.price}$`)}}));const e=document.getElementById("type-filter"),t=document.getElementById("days-filter"),n=document.getElementById("price-filter");document.getElementById("filters").addEventListener("change",(()=>{l(r.filter((o=>!(e.value&&o.type!==e.value||t.value&&o.days!=t.value||n.value&&!(o.price<=+n.value)))))}))}function l(e){o.innerHTML="",e.forEach((e=>{const t=document.createElement("article");t.innerHTML=`\n            <img src="${e.image}" alt="${e.title}" loading="lazy">\n            <h3>${e.title}</h3>\n            <p>${e.description}</p>\n            <p class="details">–¶–µ–Ω–∞: –æ—Ç ${e.price}$ ¬∑ ${e.days} –¥–Ω. ¬∑ –õ—É—á—à–∏–π —Å–µ–∑–æ–Ω: ${e.season}</p>\n        `,o.appendChild(t)}))}const c=document.getElementById("review-form");c&&c.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("review-name").value.trim(),n=document.getElementById("review-text").value.trim(),o=document.getElementById("review-rating").value;if(!t||!n)return;const r=document.createElement("article");r.className="review",r.innerHTML=`<p>"${n}" ‚Äî ${t}, —Ä–µ–π—Ç–∏–Ω–≥ ${o}/5</p>`,c.before(r),c.reset()}));const s={en:{menu:["About","Features","Goal","Routes","Places","Reviews","FAQ","Status"],heroTitle:"Mandarin Path",heroText:"Curated tours across China"},zh:{menu:["ÂÖ≥‰∫é","ÁâπËâ≤","ÁõÆÊ†á","Ë∑ØÁ∫ø","Âú∞ÁÇπ","ËØÑ‰ª∑","FAQ","Áä∂ÊÄÅ"],heroTitle:"Ê©òÂ≠ê‰πãË∑Ø",heroText:"Á≤æÂøÉÁ≠ñÂàíÁöÑ‰∏≠ÂõΩÊóÖË°åÁ∫øË∑Ø"},ru:{menu:["–û –ø—Ä–æ–µ–∫—Ç–µ","–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏","–¶–µ–ª—å","–ú–∞—Ä—à—Ä—É—Ç—ã","–ú–µ—Å—Ç–∞","–û—Ç–∑—ã–≤—ã","FAQ","–°—Ç–∞—Ç—É—Å"],heroTitle:"–ü—É—Ç—å –ú–∞–Ω–¥–∞—Ä–∏–Ω–∞",heroText:"–ê–≤—Ç–æ—Ä—Å–∫–∏–µ —Ç—É—Ä—ã –ø–æ –ö–∏—Ç–∞—é, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Å –ª—é–±–æ–≤—å—é"}},a=document.getElementById("lang-toggle");if(a){let e=localStorage.getItem("lang")||"ru";d(e),a.addEventListener("click",(()=>{e="ru"===e?"en":"en"===e?"zh":"ru",d(e),localStorage.setItem("lang",e)}))}function d(e){const t=s[e];document.querySelectorAll(".menu li a").forEach(((e,n)=>{e.textContent=t.menu[n]})),document.querySelector(".hero h2").textContent=t.heroTitle,document.querySelector(".hero p").textContent=t.heroText,a.textContent="ru"===e?"EN":"en"===e?"‰∏≠Êñá":"RU"}const i=document.getElementById("scroll-top");i&&(window.addEventListener("scroll",(()=>{window.scrollY>400?i.classList.add("show"):i.classList.remove("show")})),i.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})))})();
